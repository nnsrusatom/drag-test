(function(t){function e(e){for(var n,s,c=e[0],a=e[1],l=e[2],u=0,d=[];u<c.length;u++)s=c[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);h&&h(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,c=1;c<i.length;c++){var a=i[c];0!==o[a]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},o={app:0},r=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var h=a;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"5a3b":function(t,e,i){"use strict";var n=i("d611"),o=i.n(n);o.a},"5c0b":function(t,e,i){"use strict";var n=i("9c0c"),o=i.n(n);o.a},"9c0c":function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n,o=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"schema-wrap"},[i("Schema")],1)])},s=[],c=i("d4ec"),a=i("262e"),l=i("2caf"),h=i("9ab4"),u=i("60a3"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"Schema",attrs:{id:"schema"}},[i("div",{staticClass:"tools-wrap",style:{height:t.toolsWrapHeight+"px"}},[i("div",{staticClass:"button",on:{click:function(e){return t.addObjectZone()}}},[t._v("Z")])]),i("svg",{attrs:{viewBox:"0 0 "+t.width+" "+t.height,width:t.width,height:t.height}},[i("rect",{attrs:{x:"0",y:"0",width:t.width,height:t.height,fill:t.colorBackground}}),i("g",{staticClass:"grid",domProps:{innerHTML:t._s(t.templateGrid())}}),i("g",{staticClass:"zone"},t._l(t.zoneList(),(function(t){return i("Zone",{key:"zone-wrap-"+t.id,attrs:{id:t.id,slots:t.slots,selected:t.selected}})})),1)])])},f=[],v=(i("99af"),i("cb29"),i("4de4"),i("5530")),b=i("bee2");(function(t){t[t["zone"]=0]="zone"})(n||(n={}));var p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.id>0?i("g",{staticClass:"Zone draggable",attrs:{transform:"translate(0,0)",x:"20",y:"20",id:"zone-"+t.id}},[i("rect",{attrs:{x:"0",y:"0",width:t.width,height:t.height,fill:t.colorBackground,"stroke-width":"1",stroke:t.colorBorder}}),t.selected?i("rect",{attrs:{id:"drag-"+t.id,x:t.width/2-10,y:t.height/2-10,width:"20",height:"20",fill:"#ff9900"}}):t._e()]):t._e()},g=[],m=function(t){Object(a["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.width=250,t.height=200,t.colorBackground="#cccccc",t.colorBorder="#999999",t.gridSize=10,t.isDrag=!1,t}return Object(b["a"])(i,[{key:"startDrag",value:function(t){for(var e in this.$store.commit("toFrontObject",this.id),this.$store.commit("selectObject",this.id),t.path){var i=t.path[e];if(i.getAttribute&&i.getAttribute("id")==="drag-".concat(this.id)){this.isDrag=!0,this.offset=this.offset?this.offset:this.getMousePosition(t);break}}t.stopImmediatePropagation()}},{key:"drag",value:function(t){if(this.isDrag){t.preventDefault();var e=this.getMousePosition(t),i=Math.floor((e.x-this.offset.x)/this.gridSize)*this.gridSize,n=Math.floor((e.y-this.offset.y)/this.gridSize)*this.gridSize;i&&n&&this.elementSelf.setAttribute("transform","translate(".concat(i,",").concat(n,")"))}}},{key:"endDrag",value:function(t){this.isDrag=!1}},{key:"getMousePosition",value:function(t){return{x:t.clientX,y:t.clientY}}},{key:"mounted",value:function(){this.elementSelf=document.getElementById("zone-".concat(this.id)),this.elementSelf&&(this.elementSelf.addEventListener("mousedown",this.startDrag),this.elementSelf.addEventListener("mousemove",this.drag),this.elementSelf.addEventListener("mouseup",this.endDrag),this.elementSelf.addEventListener("mouseleave",this.endDrag))}},{key:"beforeDestroy",value:function(){this.elementSelf&&(this.elementSelf.removeEventListener("mousedown",this.startDrag),this.elementSelf.removeEventListener("mousemove",this.drag),this.elementSelf.removeEventListener("mouseup",this.endDrag),this.elementSelf.removeEventListener("mouseleave",this.endDrag))}}]),i}(u["c"]);Object(h["a"])([Object(u["b"])()],m.prototype,"id",void 0),Object(h["a"])([Object(u["b"])()],m.prototype,"selected",void 0),Object(h["a"])([Object(u["b"])()],m.prototype,"slots",void 0),m=Object(h["a"])([Object(u["a"])({})],m);var y=m,j=y,O=i("2877"),w=Object(O["a"])(j,p,g,!1,null,null,null),S=w.exports,k=i("2f62"),x=function(t){Object(a["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.colorBackground="#ffffff",t.colorGrid="#cccccc",t.toolsWrapHeight=40,t.gridSize=10,t.width=0,t.height=0,t.emptySlot={objectId:0,destination:!1,source:!1},t.emptyZone={id:0,type:n.zone,selected:!0,slots:new Array(18).fill(t.emptySlot)},t}return Object(b["a"])(i,[{key:"init",value:function(){this.width=0,this.height=0;var t=document.getElementById("schema");t&&(this.width=t.clientWidth,this.height=t.clientHeight-this.toolsWrapHeight)}},{key:"addObjectZone",value:function(){this.$store.commit("addObjectZone",this.emptyZone)}},{key:"templateGrid",value:function(){var t="";if(this.width<this.gridSize&&this.height<this.gridSize)return t;for(var e=0;e<this.width;e+=this.gridSize)t="".concat(t,'\n      <line x1="').concat(e,'" y1="0" x2="').concat(e,'" y2="').concat(this.height,'"\n        stroke-width="0.5" stroke="').concat(this.colorGrid,'" />');for(var i=0;i<this.height;i+=this.gridSize)t="".concat(t,'\n      <line x1="0" y1="').concat(i,'" x2="').concat(this.width,'" y2="').concat(i,'"\n        stroke-width="0.5" stroke="').concat(this.colorGrid,'" />');return t}},{key:"zoneList",value:function(){return this.objects?this.objects.filter((function(t){return t.type===n.zone})):[]}},{key:"omClick",value:function(){this.$store.commit("selectObject",0)}},{key:"mounted",value:function(){this.init(),window.addEventListener("resize",this.init),window.addEventListener("mousedown",this.omClick)}},{key:"beforeDestroy",value:function(){window.removeEventListener("resize",this.init),window.removeEventListener("mousedown",this.omClick)}}]),i}(u["c"]);x=Object(h["a"])([Object(u["a"])({components:{Zone:S},computed:Object(v["a"])({},Object(k["b"])(["objects"]))})],x);var z=x,E=z,_=(i("5a3b"),Object(O["a"])(E,d,f,!1,null,"11e9c37d",null)),D=_.exports,L=function(t){Object(a["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.msg="Hello",t}return i}(u["c"]);L=Object(h["a"])([Object(u["a"])({components:{Schema:D}})],L);var P=L,C=P,M=(i("5c0b"),Object(O["a"])(C,r,s,!1,null,null,null)),Z=M.exports,B=i("b85c");o["a"].use(k["a"]);var $=new k["a"].Store({state:{lastId:0,objects:Array()},mutations:{addObjectZone:function(t,e){t.lastId++,e.id=t.lastId,t.objects.push(Object(v["a"])({},e))},selectObject:function(t,e){var i,n=Object(B["a"])(t.objects);try{for(n.s();!(i=n.n()).done;){var o=i.value;o.selected=o.id===e}}catch(r){n.e(r)}finally{n.f()}},toFrontObject:function(t,e){var i,n=[],o=null,r=Object(B["a"])(t.objects);try{for(r.s();!(i=r.n()).done;){var s=i.value;s.id===e?o=s:n.push(s)}}catch(c){r.e(c)}finally{r.f()}null!==o&&n.push(o),t.objects=n}},actions:{},modules:{}});o["a"].config.productionTip=!1,new o["a"]({store:$,render:function(t){return t(Z)}}).$mount("#app")},d611:function(t,e,i){}});
//# sourceMappingURL=app.e326250a.js.map